<%= nested_form_for @report, :html => { :class => "form-horizontal report" } do |f| %>

  <% if @report.errors.any? %>
      <div id="error_expl" class="panel panel-danger">
        <div class="panel-heading">
          <h3 class="panel-title"><%= pluralize(@report.errors.count, "error") %> prohibited this report from being saved:
          </h3>
        </div>
        <div class="panel-body">
          <ul>
          <% @report.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
        </div>
      </div>
  <% end %>
<hr>
<br>
<div class="row">
  <div class="col-md-4" >
    <div class="form-group">
        <div class="col-lg-10">
          <h3 class = "titulo" style = "margin :0px 0px 5px 0;">Principal</h3>
          <br>
        </div>
        <div class="col-lg-10">
           <%= f.label :code%>
        </div>

        <div class="col-lg-10">
          <%= f.text_field :code,:value => @code, :class => 'form-control code' %>
        </div>
        <%=f.error_span(:code) %>
    </div>
    <%= f.hidden_field :post_id, :value => @count %>
    <div class="form-group">
  <div class="col-lg-10">
      <%= f.label :autor %>
      </div>
      <div class="col-lg-10">
        <%= f.text_field :autor,:value => "Martin Velez", :class => 'form-control autor' %>
      </div>
      <%=f.error_span(:autor) %>
    </div>
  <div class="form-group">
    <br>
    <%= f.label :product_name , :class => 'control-label col-lg-2'%>
    <br>
    <div class="col-lg-10">
            <div class="radio-inline">
              <label style = "font-weight: 100; cursor: pointer;"><%= f.radio_button(:product_name, "LYCRA速fiber", :required => true)%>LYCRA速fiber</label>
            </div>
              <div class="radio-inline">
              <label style = "font-weight: 100; cursor: pointer;"><%= f.radio_button(:product_name, "Nylon", :required => true)%>Nylon</label>
            </div>
           
            <br>
           <div class="radio-inline">
              <label style = "font-weight: 100; cursor: pointer;"><%= f.radio_button(:product_name, "Elaspan 速", :required => true)%>Elaspan 速</label>
            </div>
            <div style = "margin-left: 28px;" class="radio-inline">
              <label style = "font-weight: 100; cursor: pointer;"><%= f.radio_button(:product_name, "T400", :required => true)%>T400</label>
            </div>
        </div>
        <%=f.error_span(:product_name) %>    
    </div>
  </div>



  <div class="col-md-4" style = "border-right: 1px solid gainsboro;border-left: 1px solid gainsboro;"><div class="form-group">
  
  <div class="col-lg-10" style="padding-left: 15px;">
    <h3 class = "titulo" style = "margin :0px 0px 5px 0;" >Date</h3>
    <br>
  </div>
   <div class="col-lg-10">
    <%= f.label "Fecha de Prestamo" %>
    </div>
    <div class="col-lg-10">
      <%= f.date_field :customer_report_date, :class => 'form-control' %>
    </div>
    <%=f.error_span(:customer_report_date) %>
  </div>
  <div class="form-group">
  <div class="col-lg-10">
    <%= f.label :report_start_date %>
    </div>
    <div class="col-lg-10">
      <%= f.date_field :report_start_date, :class => 'form-control' %>
    </div>
    <%=f.error_span(:report_start_date) %>
  </div></div>
 
 <div class="col-md-4" style = "border-right: 1px solid gainsboro;">
 <div class="col-lg-10" style="padding: 0px;">
    <h3 class = "titulo">Location</h3>
    <br>
    </div>
 <div class="form-group">
 <div class="col-lg-10">
    <%= f.label :plant_id%>
    </div>
    <div class="col-lg-10">
      <div class="field">
    <%= render "field_plant" , f: f  %>  


    </div>
   
  
    </div>
    <%=f.error_span(:plant_id) %>
  </div>
  <div class="form-group">
  <div class="col-lg-10">
   <%= f.label "Country" %>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :title, :class => 'form-control country' %>
    </div>
    <%=f.error_span(:title) %>
  </div>
   
  
   </div>

</div>
  
  <br>
  <hr>
  <br>
  <br>
  
<div class="row">
<div class="col-lg-12">
    <h3 class = "titulo" style = "margin :0px 0px 5px 0;">Product</h3>
    <br>
    </div>
  <div class="col-md-4" >
    <!--<div class="form-group">
    <div class="col-lg-6">
    <%= f.label :value %>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :value, :class => 'form-control value' %>
    </div>
    <%=f.error_span(:value) %>
  </div>-->
  <div class="form-group">
  <div class="col-lg-6">
    <%= f.label :decitex%>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :decitex, :class => 'form-control decitex' %>
    </div>
    <%=f.error_span(:decitex) %>
  </div>
  <div class="form-group">
  <div class="col-lg-6">
    <%= f.label :denier %>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :denier, :class => 'form-control denier' %>
    </div>
    <%=f.error_span(:denier) %>
  </div>
  <div class="form-group">
 <div class="col-lg-10">
    <%= f.label :yarn_type_id %>
    </div>
    <div class="col-lg-10">
          <div class="field_yarn">
    <%= render "field_yarn" , f: f  %>  


    </div>
      
    </div>
    <%=f.error_span(:yarn_type_id) %>
  </div>
</div>

<div class="col-md-4" >
 
  <div class="form-group">
  <div class="col-lg-10">
    <%= f.label :merge_id %>
   </div>
    <div class="col-lg-10">
   <div class="field_merge">
    <%= render "field_merge" , f: f  %>  


    </div>


    </div>
    <%=f.error_span(:merge_id) %>
  </div>
   <div class="form-group">
   <div class="col-lg-10">
    <%= f.label :filament_count_id %>
   </div>
    <div class="col-lg-10">
    <div class="field_filament">
    <%= render "field_filament" , f: f  %>  


    </div>
   
    </div>
    <%=f.error_span(:filament_count_id) %>
  </div>
</div>


</div>
<br>
<hr>
<div class="row">

      <div class="col-md-6" style="">
        <div class="col-lg-10" style="padding: 0px;">
          <h3 class = "titulo" style = "margin :0px 0px 5px 0;">Product Image</h3>
          </div>
          <%= f.fields_for :product_images do |attachment_form|  %>
        <div class="clearfix">
      <div class="col-md-12" style="padding: 0px;" >
        <div class="col-md-1" style = "margin-top:25px" >
        <%= attachment_form.link_to_remove do %>
      <i style = "color:#e74b09;font-size: 20px" class="fa fa-trash" aria-hidden="true"></i>
        <% end %>
          </div>
        
          <div class="col-md-2" >
          <%= attachment_form.label :number %>
          <%= attachment_form.text_field :number, :class => 'form-control' %>
          </div>
          <div class="col-md-4 pad" >
          <%= attachment_form.label :image %>
          <%= attachment_form.file_field :image, :class => 'form-control' %>
          </div>
          <div class="col-md-5" >
          <%= attachment_form.label :description %>
          <%= attachment_form.text_field :description, :class => 'form-control' %>

        
        </div>
          </div>
          </div>


      <%end%>
       <%= f.link_to_add "Add Produt Images", :product_images, :class => 'btn btn-primary top10 btn1'  %>
      </div>
     
</div>



<br>
  <hr>
<br>

 <div class="row">
 <div class="col-lg-12">
    <h3 class = "titulo" style = "margin :0px 0px 5px 0;">Market Information</h3>
    <br>
    </div>
  <div class="col-md-4" >
  <div class="form-group">
  <div class="col-lg-10">
        <%= f.label :segment %>
         </div>
        <div class="col-lg-10">
          
        <%= f.select :segment, options_for_select(["Core Spinnig", "Weaving", "Circular Knit", "Covering", "Direct Knit", "Warp Knitting", "Raschel", "Seamless" , "Narrows"], :selected=>@array_segment), {}, {:multiple => true, :class => "chzn-select form-control example-getting-started", :style => "width:450px;",:id =>""} %>
        </div>
        <%=f.error_span(:segment) %>
      </div>
      <div class="form-group">
      <div class="col-lg-10">
        <%= f.label :customer_end_use%>
         </div>
        <div class="col-lg-10">
       
        
        <%= f.select :customer_end_use, options_for_select(["Intimate Apparel", "Swimwear", "Legwear", "Ready to Wear", "Bandages"], :selected =>@array_use), {}, {:multiple => true, :class => "chzn-select form-control example-getting-started", :style => "width:450px;",:id =>""} %>
        </div>
        <%=f.error_span(:customer_end_use) %>
      </div>
    
      
</div>

<div class="col-md-4" >
 <div class="form-group">
 <div class="col-lg-10">
    <%= f.label "Cantidad en Kilos" %>
     </div>
    <div class="col-lg-10">
      <%= f.text_field :quantity_shipped, :class => 'form-control' %>
    </div>
    <%=f.error_span(:quantity_shipped) %>
  </div>
  <div class="form-group">
  <div class="col-lg-10">
    <%= f.label "Cantidad en Carretes"%>
     </div>
    <div class="col-lg-10">
      <%= f.text_field :quantity_affected, :class => 'form-control' %>
    </div>
    <%=f.error_span(:quantity_affected) %>
  </div>

  <div class="form-group">

    <%=f.error_span(:return_value) %>
  </div>
</div>


<div class="col-md-4" >



</div>
</div>
<br>
   <hr>
<br>
 
<div class="row">
<div class="col-lg-12">
    <h3 class = "titulo" style = "margin :0px 0px 5px 0;">Customer Information</h3>
    <br>
    </div>
  <div class="col-md-4" >
<div class="form-group">
<div class="col-lg-10">
    <%= f.label :customer_id %>
    </div>
    <div class="col-lg-10">
       <div class="field_customer">
    <%= render "field_customer" , f: f  %>  


    </div>
      
    </div>
    <%=f.error_span(:customer_id) %>
  </div>
  <div class="form-group">
  <div class="col-lg-10">
    <%= f.label :reporter %>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :reporter, :class => 'form-control' %>
    </div>
    <%=f.error_span(:reporter) %>
  </div>

    </div>
     <div class="col-md-4" >
<div class="form-group">
<div class="col-lg-10">
    <%= f.label :phone %>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :phone, :class => 'form-control' %>
    </div>
    <%=f.error_span(:phone) %>
  </div>
  <div class="form-group">
  <div class="col-lg-10">
    <%= f.label :email %>
    </div>
    <div class="col-lg-10">
      <%= f.text_field :email, :class => 'form-control' %>
    </div>
    <%=f.error_span(:email) %>
  </div>

    </div>
  <div class="col-md-4" >
  </div>
</div>
<br>
<hr>
<br>
<br>
<div class="row">
<div class="col-lg-12">
    <h3 class = "titulo">Description of the problem</h3>
    <br>
    </div>

 <div class="col-md-8" >
  <div class="form-group">
  <div class="col-lg-10">
    <%= f.label :description_problem%>
    </div>
    <div class="col-lg-10">
      <%= f.text_area :description_problem, :class => 'form-control tarea' %>
    </div>
    <%=f.error_span(:description_problem) %>
  </div>
</div>
</div>
<hr>
  
  

    <%= f.hidden_field :type_report, :value => "prestamos" %>






  <div class="form-group" style = "text-align: right;">
    
      <%= f.submit nil, :class => 'btn btn-primary btn1'+ "?prestamos=pres" %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                index_prestamos_path, :class => 'btn btn-default' %>
    
  </div>

<% end %>
   <%= render "form_plant"%>
    <%= render "form_yarn"%>
     <%= render "form_merge"%>
      <%= render "form_filament"%>
       <%= render "form_customer"%>
        <%= render "form_problem"%>

<script>
$(document).on('turbolinks:load',function() {
  
 $(".decitex").change(function(){
        $d = 0;
        $d = $(".decitex").val();
        $d= (0.9*$d).toFixed(2);

        $(".denier").val($d);
        
    });
 $(".denier").change(function(){
        $d = 0;
        $d = $(".denier").val();
        $d= ($d/0.9).toFixed(2);

        $(".decitex").val($d);
    });

});



function myFunction_plant() {
    $(".myForm_plant").submit();

    var n = $('#name').val();
    var c = $('#country').val();
 
      
     $.ajax({
     url :"/create_plant",
     type: "POST",
     data: {
        "name": n,
        "country": c,
           },
     success: function(response){
       $a = $(".plant1").val();
                $.get("/get_country/" + $a , function(data) 
                {

                console.log(data.name);
                console.log($a);
                $(".country").val(data.country)


                });

     },
     error:function(response){
         
     }
 });  
   }

   function myFunction_yarn() {
    $(".myForm_yarn").submit();

    var n = $('#name_yarn').val();

 
      
     $.ajax({
     url :"/create_yarn",
     type: "POST",
     data: {
        "name": n,

           },
     success: function(response){
      

     },
     error:function(response){
         
     }
 });  
   }

   function myFunction_merge() {
    $(".myForm_merge").submit();

    var n = $('#name_merge').val();

 
      
     $.ajax({
     url :"/create_merge",
     type: "POST",
     data: {
        "name": n,

           },
     success: function(response){
      

     },
     error:function(response){
         
     }
 });  
   }

      function myFunction_filament() {
    $(".myForm_filament").submit();

    var n = $('#name_filament').val();

 
      
     $.ajax({
     url :"/create_filament",
     type: "POST",
     data: {
        "name": n,

           },
     success: function(response){
      

     },
     error:function(response){
         
     }
 });  
   }

      function myFunction_customer() {
    $(".myForm_customer").submit();

    var n = $('#name_customer').val();
    var c = $('#country_customer').val();
    var a = $('#address_customer').val();
    var ci = $('#city_customer').val();

 
      
     $.ajax({
     url :"/create_customer",
     type: "POST",
     data: {
        "name": n,
         "country": c,
          "address": a,
           "city": ci,

           },
     success: function(response){
      

     },
     error:function(response){
         
     }
 });  
   }

function myFunction_problem() {
    $(".myForm_problem").submit();

    var n = $('#name_problem').val();

 
      
     $.ajax({
     url :"/create_problem",
     type: "POST",
     data: {
        "name": n,

           },
     success: function(response){
      

     },
     error:function(response){
         
     }
 });  
   }




$(document).on('turbolinks:load',function() 

{
        
 
 if (<%= action_name == "edit"%>)
{
 $a = <%= action_name == "edit" ? @report.plant_id : 0 %>  ;
 }
  else
  {
  $a =   $(".plant1").val();
  }


                $.get("/get_country/" + $a , function(data) 
                {

                console.log(data.name);
                console.log($a);
                $(".plant1").val(3)
                $(".country").val(data.country)


                });      




                   });


    $(".plant1").change(function()
          {
                $a = $(".plant1").val();
                $.get("/get_country/" + $a , function(data) 
                {

                console.log(data.name);
                console.log($a);
                $(".country").val(data.country)


                });

          });


</script>



<style>
.multiselect
{    text-align: left !important;
}
  .btn .caret {
    margin-left:0% !important;
}

.control-label{

  width: 101px;
  padding: 0px !important;
  margin: 0px !important;
}

.btn1{
  background-color: #eb5e07 !important;
  border: 1px solid #eb5e07 !important;
}
</style>